(()=>{var e={};e.id=649,e.ids=[649],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8630:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),a(6323),a(9966),a(5866);var r=a(3191),t=a(8716),n=a(7922),i=a.n(n),l=a(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(s,o);let c=["",{children:["import",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6323)),"C:\\Users\\w10\\Documents\\GitHub\\ReponedorNUAM\\frontend\\src\\app\\import\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,9966)),"C:\\Users\\w10\\Documents\\GitHub\\ReponedorNUAM\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\w10\\Documents\\GitHub\\ReponedorNUAM\\frontend\\src\\app\\import\\page.tsx"],m="/import/page",x={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/import/page",pathname:"/import",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6453:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},1360:(e,s,a)=>{Promise.resolve().then(a.bind(a,3102))},8021:(e,s,a)=>{Promise.resolve().then(a.bind(a,1702))},1702:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var r=a(326),t=a(9837),n=a(7577),i=a(5329);function l({onSuccess:e}){let[s,a]=(0,n.useState)(null),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1),[m,x]=(0,n.useState)(null),[h,u]=(0,n.useState)(!1),p=(0,n.useCallback)(e=>{if(a(e),x(null),"text/csv"===e.type||e.name.endsWith(".csv")){let s=new FileReader;s.onload=e=>{let s=(e.target?.result).split("\n"),a=s[0].split(",").map(e=>e.trim());o(s.slice(1,6).map(e=>{let s=e.split(",").map(e=>e.trim()),r={};return a.forEach((e,a)=>{r[e]=s[a]||""}),r}).filter(e=>Object.values(e).some(e=>e)))},s.readAsText(e)}},[]),f=(0,n.useCallback)(e=>{e.preventDefault(),u(!1);let s=e.dataTransfer.files[0];s&&p(s)},[p]),g=(0,n.useCallback)(e=>{e.preventDefault(),u(!0)},[]),b=(0,n.useCallback)(e=>{e.preventDefault(),u(!1)},[]),j=async()=>{if(!s)return;d(!0);let a=new FormData;a.append("file",s);try{let s=await fetch("/api/import",{method:"POST",body:a}),r=await s.json();x(r),r.success>0?e&&e():alert("Error en la importaci\xf3n: "+r.error)}catch(e){alert("Error al procesar el archivo: "+e.message)}finally{d(!1)}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,r.jsxs)(i.Zb,{children:[r.jsx(i.Ol,{children:r.jsx(i.ll,{children:"Importaci\xf3n Masiva de Calificaciones"})}),r.jsx(i.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-600",children:"Sube un archivo CSV con las calificaciones tributarias. El archivo debe contener las siguientes columnas:"}),r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,r.jsxs)("ul",{className:"text-sm space-y-1",children:[(0,r.jsxs)("li",{children:[r.jsx("strong",{children:"emisorName:"})," Nombre de la empresa"]}),(0,r.jsxs)("li",{children:[r.jsx("strong",{children:"taxId:"})," RUT o identificaci\xf3n tributaria"]}),(0,r.jsxs)("li",{children:[r.jsx("strong",{children:"period:"})," Per\xedodo (YYYY-MM)"]}),(0,r.jsxs)("li",{children:[r.jsx("strong",{children:"amount:"})," Monto"]}),(0,r.jsxs)("li",{children:[r.jsx("strong",{children:"country:"})," Pa\xeds (CL, PE, CO)"]})]})}),r.jsx(t.z,{onClick:()=>{let e=new Blob(["emisorName,taxId,period,amount,country\nEmpresa Ejemplo S.A.,76.123.456-7,2024-08,150000,CL\nCorporaci\xf3n Lima EIRL,20123456789,2024-08,85000,PE\nInversiones Bogot\xe1 Ltda.,900.123.456-1,2024-08,320000,CO"],{type:"text/csv"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="plantilla_calificaciones.csv",a.click(),URL.revokeObjectURL(s)},variant:"secondary",children:"Descargar Plantilla CSV"})]})})]}),r.jsx(i.Zb,{children:r.jsx(i.aY,{className:"p-6",children:r.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${h?"border-nuam-500 bg-nuam-50":"border-gray-300 hover:border-gray-400"}`,onDrop:f,onDragOver:g,onDragLeave:b,children:s?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"text-green-600 font-medium",children:["âœ“ Archivo seleccionado: ",s.name]}),r.jsx(t.z,{onClick:j,disabled:c,children:c?"Procesando...":"Importar Datos"}),r.jsx(t.z,{variant:"secondary",onClick:()=>{a(null),o([])},children:"Cambiar Archivo"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-gray-600",children:[r.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC4"}),r.jsx("p",{children:"Arrastra tu archivo CSV aqu\xed o"})]}),r.jsx(t.z,{variant:"secondary",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".csv",e.onchange=e=>{let s=e.target.files?.[0];s&&p(s)},e.click()},children:"Seleccionar Archivo"})]})})})}),l.length>0&&(0,r.jsxs)(i.Zb,{children:[r.jsx(i.Ol,{children:r.jsx(i.ll,{children:"Vista Previa (primeras 5 filas)"})}),r.jsx(i.aY,{children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[r.jsx("thead",{children:r.jsx("tr",{className:"bg-gray-50",children:Object.keys(l[0]||{}).map(e=>r.jsx("th",{className:"border border-gray-300 p-2 text-left",children:e},e))})}),r.jsx("tbody",{children:l.map((e,s)=>r.jsx("tr",{children:Object.values(e).map((e,s)=>r.jsx("td",{className:"border border-gray-300 p-2",children:e},s))},s))})]})})})]}),m&&(0,r.jsxs)(i.Zb,{children:[r.jsx(i.Ol,{children:r.jsx(i.ll,{children:"Resultado de la Importaci\xf3n"})}),r.jsx(i.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"text-green-600 font-semibold",children:["Exitosos: ",m.success]})}),r.jsx("div",{className:"bg-red-50 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"text-red-600 font-semibold",children:["Errores: ",m.errors]})})]}),m.errorDetails&&m.errorDetails.length>0&&(0,r.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[r.jsx("div",{className:"text-red-600 font-medium mb-2",children:"Detalles de errores:"}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:m.errorDetails.map((e,s)=>(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("strong",{children:["Fila ",e.row,":"]})," ",e.error]},s))})]})]})})]})]})}function o(){return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Importaci\xf3n Masiva"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Carga archivos CSV con calificaciones tributarias de forma masiva"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx(t.z,{variant:"secondary",size:"sm",onClick:()=>window.location.href="/qualifications",children:"Ver Calificaciones"}),r.jsx(t.z,{variant:"secondary",size:"sm",onClick:()=>window.location.href="/dashboard",children:"Dashboard"})]})]})}),r.jsx(l,{onSuccess:()=>{alert("Importaci\xf3n completada exitosamente")}})]})}},3102:(e,s,a)=>{"use strict";a.d(s,{Header:()=>d});var r=a(326),t=a(7577),n=a(434),i=a(5047),l=a(7025),o=a(1223);let c=[{name:"Dashboard",href:"/dashboard",icon:"\uD83D\uDCCA"},{name:"Calificaciones",href:"/qualifications",icon:"\uD83D\uDCCB"},{name:"Entidades",href:"/tax-entities",icon:"\uD83C\uDFE2"},{name:"Importar",href:"/import",icon:"\uD83D\uDCE4"}];function d(){let e=(0,i.usePathname)(),[s,a]=(0,t.useState)(!1);return r.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[r.jsx(n.default,{href:"/dashboard",className:"flex-shrink-0 flex items-center",children:r.jsx(l.T,{size:"lg",showText:!1})}),r.jsx("nav",{className:"hidden lg:flex space-x-6",children:c.map(s=>(0,r.jsxs)(n.default,{href:s.href,className:(0,o.cn)("flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",e===s.href?"bg-nuam-100 text-nuam-700 shadow-sm":"text-gray-600 hover:text-nuam-600 hover:bg-nuam-50"),children:[r.jsx("span",{className:"text-lg",children:s.icon}),r.jsx("span",{children:s.name})]},s.name))}),r.jsx("nav",{className:"hidden md:flex lg:hidden space-x-4",children:c.map(s=>(0,r.jsxs)(n.default,{href:s.href,className:(0,o.cn)("flex items-center space-x-1 px-2 py-2 rounded-lg text-xs font-medium transition-all duration-200",e===s.href?"bg-nuam-100 text-nuam-700 shadow-sm":"text-gray-600 hover:text-nuam-600 hover:bg-nuam-50"),title:s.name,children:[r.jsx("span",{className:"text-base",children:s.icon}),r.jsx("span",{className:"hidden sm:inline",children:s.name})]},s.name))}),r.jsx("div",{className:"md:hidden",children:(0,r.jsxs)("button",{type:"button",onClick:()=>a(!s),className:"relative p-2 rounded-lg text-gray-400 hover:text-nuam-600 hover:bg-nuam-50 focus:outline-none focus:ring-2 focus:ring-nuam-500 focus:ring-offset-2 transition-colors",children:[r.jsx("span",{className:"sr-only",children:s?"Cerrar men\xfa":"Abrir men\xfa principal"}),(0,r.jsxs)("div",{className:"w-6 h-6 relative",children:[r.jsx("span",{className:(0,o.cn)("absolute h-0.5 w-6 bg-current transform transition-all duration-300",s?"rotate-45 translate-y-0":"rotate-0 -translate-y-2")}),r.jsx("span",{className:(0,o.cn)("absolute h-0.5 w-6 bg-current transform transition-all duration-300",s?"opacity-0":"opacity-100")}),r.jsx("span",{className:(0,o.cn)("absolute h-0.5 w-6 bg-current transform transition-all duration-300",s?"-rotate-45 translate-y-0":"rotate-0 translate-y-2")})]})]})})]}),r.jsx("div",{className:(0,o.cn)("md:hidden transition-all duration-300 ease-in-out overflow-hidden",s?"max-h-64 opacity-100 pb-4":"max-h-0 opacity-0 pb-0"),children:r.jsx("nav",{className:"flex flex-col space-y-2 pt-2",children:c.map(s=>(0,r.jsxs)(n.default,{href:s.href,onClick:()=>a(!1),className:(0,o.cn)("flex items-center space-x-3 px-4 py-3 rounded-lg text-base font-medium transition-all duration-200",e===s.href?"bg-nuam-100 text-nuam-700 shadow-sm border-l-4 border-nuam-500":"text-gray-700 hover:text-nuam-600 hover:bg-nuam-50 active:bg-nuam-100"),children:[r.jsx("span",{className:"text-xl",children:s.icon}),r.jsx("span",{children:s.name}),e===s.href&&r.jsx("div",{className:"ml-auto w-2 h-2 bg-nuam-500 rounded-full"})]},s.name))})})]})})}},9837:(e,s,a)=>{"use strict";a.d(s,{z:()=>i});var r=a(326),t=a(7577),n=a(1135);let i=(0,t.forwardRef)(({className:e,variant:s="primary",size:a="md",...t},i)=>r.jsx("button",{className:(0,n.W)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-nuam-600 text-white hover:bg-nuam-700":"primary"===s,"bg-gray-200 text-gray-900 hover:bg-gray-300":"secondary"===s,"bg-red-600 text-white hover:bg-red-700":"destructive"===s||"danger"===s,"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50":"outline"===s,"h-9 px-3 text-sm":"sm"===a,"h-10 px-4 py-2":"md"===a,"h-11 px-8":"lg"===a},e),ref:i,...t}));i.displayName="Button"},5329:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>l,Zb:()=>i,aY:()=>c,ll:()=>o});var r=a(326),t=a(7577),n=a(1135);let i=(0,t.forwardRef)(({className:e,...s},a)=>r.jsx("div",{ref:a,className:(0,n.W)("rounded-lg border border-gray-200 bg-white p-6 shadow-sm",e),...s}));i.displayName="Card";let l=(0,t.forwardRef)(({className:e,...s},a)=>r.jsx("div",{ref:a,className:(0,n.W)("flex flex-col space-y-1.5 pb-6",e),...s}));l.displayName="CardHeader";let o=(0,t.forwardRef)(({className:e,...s},a)=>r.jsx("h3",{ref:a,className:(0,n.W)("text-lg font-semibold leading-none tracking-tight",e),...s}));o.displayName="CardTitle";let c=(0,t.forwardRef)(({className:e,...s},a)=>r.jsx("div",{ref:a,className:(0,n.W)("pt-0",e),...s}));c.displayName="CardContent"},7025:(e,s,a)=>{"use strict";a.d(s,{T:()=>l});var r=a(326),t=a(6226),n=a(1223);let i={sm:"h-6 w-6",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16","2xl":"h-24 w-24 sm:h-32 sm:w-32 lg:h-40 lg:w-40 xl:h-48 xl:w-48","3xl":"h-32 w-32 sm:h-48 sm:w-48 lg:h-64 lg:w-64 xl:h-80 xl:w-80"};function l({className:e,size:s="md",showText:a=!0}){return(0,r.jsxs)("div",{className:(0,n.cn)("flex items-center space-x-2",e),children:[r.jsx("div",{className:(0,n.cn)("relative",i[s]),children:r.jsx(t.default,{src:"/Nuam-logo.png",alt:"NUAM Logo",fill:!0,className:"object-contain",priority:!0})}),a&&(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-lg font-bold text-nuam-500",children:"NUAM"}),r.jsx("span",{className:"text-xs text-gray-500 -mt-1",children:"Tax System"})]})]})}},1223:(e,s,a)=>{"use strict";a.d(s,{cn:()=>n});var r=a(1135),t=a(1009);function n(...e){return(0,t.m6)((0,r.W)(e))}},6323:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`C:\Users\w10\Documents\GitHub\ReponedorNUAM\frontend\src\app\import\page.tsx#default`)},9966:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o,metadata:()=>l});var r=a(9510),t=a(5384),n=a.n(t);let i=(0,a(8570).createProxy)(String.raw`C:\Users\w10\Documents\GitHub\ReponedorNUAM\frontend\src\components\layout\Header.tsx#Header`);a(5023);let l={title:"NUAM - Sistema de Contenedor Tributario",description:"Sistema completo para gesti\xf3n de calificaciones tributarias, entidades fiscales e importaciones masivas para 15 pa\xedses de Am\xe9rica Latina"};function o({children:e}){return r.jsx("html",{lang:"es",children:r.jsx("body",{className:n().className,children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(i,{}),r.jsx("main",{children:e})]})})})}},5023:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[276,400],()=>a(8630));module.exports=r})();